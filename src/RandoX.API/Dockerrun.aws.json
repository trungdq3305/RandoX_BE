- name: Generate deployment package
  run: |
    IMAGE_TAG=${{ github.sha }}
    mkdir -p deploy
    cat > deploy/Dockerrun.aws.json <<EOF
    {
      "AWSEBDockerrunVersion": "1",
      "Image": {
        "Name": "${{ secrets.DOCKERHUB_USERNAME }}/randox:$IMAGE_TAG"
      },
      "Ports": [
        {
          "ContainerPort": "5000"
        }
      ]
    }
    EOF
    cd deploy && zip -r ../deploy.zip .
